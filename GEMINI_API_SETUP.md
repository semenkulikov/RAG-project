# Инструкция по созданию Gemini API ключа

## Способ 1: Через Google AI Studio (рекомендуется)

1. **Зайдите на https://aistudio.google.com/**
2. **Войдите в аккаунт Google** (если не вошли)
3. **Создайте новый проект** или выберите существующий
4. **Перейдите в раздел "Get API key"** (в левом меню)
5. **Нажмите "Create API key"**
6. **Скопируйте созданный ключ**

## Способ 2: Через Google Cloud Console

1. **Зайдите на https://console.cloud.google.com/**
2. **Создайте новый проект** или выберите существующий
3. **Включите Vertex AI API:**
   - Меню → "Библиотека"
   - Поиск: "Vertex AI API"
   - Нажмите "Включить"
4. **Создайте API ключ:**
   - Меню → "Учетные данные"
   - "Создать учетные данные" → "Ключ API"
   - Скопируйте ключ

## Настройка в проекте

1. **Создайте файл `.env` в корне проекта:**
   ```
   GEMINI_API_KEY=ваш_ключ_здесь
   ```

2. **Запустите тест:**
   ```bash
   python quick_gemini_test.py
   ```

3. **Или полный тест:**
   ```bash
   python test_gemini_api.py
   ```

## Возможные проблемы

### Ошибка 403 (Forbidden)
- **Причина:** Неправильный ключ или региональные ограничения
- **Решение:** 
  - Проверьте корректность ключа
  - Включите биллинг в Google Cloud Console
  - Используйте VPN из поддерживаемого региона

### "User location is not supported"
- **Причина:** Ваш регион не поддерживается для бесплатного доступа
- **Решение:**
  - Включите биллинг в Google Cloud Console
  - Или используйте VPN из США/Европы

### "Quota exceeded"
- **Причина:** Превышены лимиты запросов
- **Решение:**
  - Проверьте квоты в Google Cloud Console
  - Запросите увеличение лимитов
  - Подождите обновления квот

## Тестирование

После создания ключа запустите:

```bash
# Быстрый тест
python quick_gemini_test.py

# Полный тест с диагностикой
python test_gemini_api.py
```

Если тесты пройдены успешно, можете запускать основную систему:

```bash
python scripts/async_reindex.py
```
